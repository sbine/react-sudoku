var EventEmitter={eventRepository:{},dispatch:function(a,b){if(this.eventRepository[a])for(var c=0;c<this.eventRepository[a].length;c++)this.eventRepository[a][c](b)},subscribe:function(a,b){this.eventRepository[a]||(this.eventRepository[a]=[]),this.eventRepository[a].push(b)}},Puzzle=React.createClass({displayName:"Puzzle",getInitialState:function(){return{cells:{},errored:[]}},componentDidMount:function(){EventEmitter.subscribe("validate",this.validatePuzzle),EventEmitter.subscribe("reset",this.resetPuzzle),this.resetPuzzle()},createCellMatrix:function(){var a=sudoku.generate(),b={};for(i=65;i<=73;i++){var c=String.fromCharCode(i);for(j=1;j<=9;j++){var d=c+""+j;void 0!==a[d]?(b[d]={},b[d]=a[d]):b[d]=""}}return b},getCells2D:function(){var a,b,c=_.values(this.state.cells),d=[],e=9;for(a=0,b=c.length;b>a;a+=e)d.push(c.slice(a,a+e));return d},updateCell:function(a,b){var c=this.state.cells,d=_.keys(c);c[d[a]]=b,this.setState({cells:c})},validatePuzzle:function(){var a=sudoku.getConflicts(this.state.cells);if(!a.length>0)return console.log("puzzle is valid"),!0;var b=a[0].errorFields,c=a[0].unit;this.setState({errored:b}),console.log("puzzle is invalid"),console.log(b),console.log(c)},resetPuzzle:function(){this.setState({cells:this.createCellMatrix(),errored:[]})},render:function(){var a=this,b=this.getCells2D(),c=_.keys(this.state.cells),d=-1;return React.createElement("table",null,React.createElement("tbody",null,_.map(b,function(b){return React.createElement("tr",null,_.map(b,function(b){d++;var e=!1;return-1!==a.state.errored.indexOf(c[d])&&(e=!0),React.createElement(Cell,{index:d,value:b,errored:e,updateHandler:a.updateCell})}))})))}}),Cell=React.createClass({displayName:"Cell",handleChange:function(a){var b=this.getDOMNode().firstChild.value;this.props.updateHandler(this.props.index,b)},render:function(){return React.createElement("td",null,React.createElement("input",{type:"text",value:this.props.value,onChange:this.handleChange,"data-errored":this.props.errored,className:"sudoku-cell"}))}}),ValidateButton=React.createClass({displayName:"ValidateButton",handleValidation:function(){EventEmitter.dispatch("validate")},render:function(){return React.createElement("button",{className:"sudoku-control",onClick:this.handleValidation},"Validate")}}),ResetButton=React.createClass({displayName:"ResetButton",handleReset:function(){EventEmitter.dispatch("reset")},render:function(){return React.createElement("button",{className:"sudoku-control",onClick:this.handleReset},"New Puzzle")}});React.render(React.createElement("div",null,React.createElement(Puzzle,null),React.createElement(ValidateButton,null),React.createElement(ResetButton,null)),document.getElementById("board"));